<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="gailan.css"/>
    <title></title>
</head>
<body>
<table>
    <tr>
        <td class="jinri" style="border: 0;">
            今日
        </td>
    </tr>
    <tr>
        <td class="add">
            <p class="a1">新增用户</p>
            <p class="a2">61</p>
            <p class="a3"><span>-13.6%</span><span class="sanjiao"></span></p>
            <span class="xia"></span>
        </td>
        <td class="add">
            <p class="a1">新增用户</p>
            <p class="a2">61</p>
            <p class="a3"><span>-13.6%</span><span class="sanjiao"></span></p>
            <span class="xia"></span>
        </td>
        <!--<td class="add">
            <p class="a1">新增用户</p>
            <p class="a2">61</p>
            <p class="a3"><span>-13.6%</span><span class="sanjiao"></span></p>
            <span class="xia"></span>
        </td>
        <td class="add">
            <p class="a1">新增用户</p>
            <p class="a2">61</p>
            <p class="a3"><span>-13.6%</span><span class="sanjiao"></span></p>
            <span class="xia"></span>
        </td>-->
        <td class="add">
            <p class="a1">新增用户</p>
            <p class="a2">61</p>
            <p class="a3"><span>-13.6%</span><span class="sanjiao"></span></p>

            <span class="xia"></span>
        </td>
        <td class="addnew">
            <span class="tian">

            </span>
        </td>

    </tr>
</table>
<div id="main" style="height:600px;width:99%"></div>
</body>
<script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script>

    $(".addnew").click(function(){
        if($(".add").length<5){
            var html='<td class="add">'+
                    '<p class="a1">新增用户</p>'+
                    '<p class="a2">61</p>'+
                    '<p class="a3"><span>-13.6%</span><span class="sanjiao"></span></p>'+
                    '<img src="del.png" alt="" class="del"/>'+
                    '<span class="xia"></span>'+
                    '</td>';

            $(this).before(html);
            move();
        }else if($(".add").length==5){

            var html= '<p class="a1">新增用户</p>'+
                    '<p class="a2">61</p>'+
                    '<p class="a3"><span>-13.6%</span><span class="sanjiao"></span></p>'+
                    '<img src="del.png" alt="" class="del"/>'+
                    '<span class="xia"></span>';

            $(this).html(html);
            $(this).removeClass("addnew");
            $(this).addClass("add");
//            $(this).css("background","white");
            move();
        }
        /*$(".del").click(function(){
//            console.log($(this))
            if($(".add").length==6){
                $(".add").eq($(".add").length-1).html('<span class="tian"></span>').removeClass("add").addClass("addnew");
                $(".addnew").css("border","0");
                move();
            }else{
                $(this).parent().remove();
                move();
            }

        });*/
    });


    function move(){
        $(".add").mouseover(function(){

//        console.log($(".add").index($(this)))//移动的块的下标
//        console.log($(".add").length);
//        if($(".add").index($(this))!=$(".add").length-1){
            $(this).css("background","white");
            $(this).css("border-bottom","2px solid #0099ff");
            $(this).children(".xia").css("visibility","visible");
//        }
        });
        $(".addnew").mouseover(function(){
            $(this).css("background","rgb(184,196,206)")
            $(this).children(".tian").css("background-position","0 0");
        });
        $(".addnew").mouseout(function(){
            $(this).css("background","white");
            $(this).children(".tian").css("background-position","0 -100px");
        });
        $(".add").mouseout(function(){
//        if($(".add").index($(this))!=$(".add").length-1){
            $(this).css("border-bottom","1px solid rgb(232,232,232)");
            $(this).children(".xia").css("visibility","hidden");
//        }
        })
    }
   move();

//    图

    jQuery(document).ready(function() {
        $.ajax({
            url: 'http://101.200.130.178/manualtools/accountdays/json/d98f7b1d4bd045e58b13ff711e2b6b84/%E5%96%B5%E6%92%AD',
            type: 'GET',
           dataType: 'jsonp',
            jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(默认为:callback)
            jsonpCallback:"callBackFun",
            /*  timeout: 1000,
            cache: false,*/
//        beforeSend: LoadFunction, //加载执行方法
//        error: erryFunction,  //错误执行方法
            success: function(a){
                 var json = $.parseJSON(a);
                console.log(json)
//                var $a=eval('('+a+')');
//                console.log($a);
            }//成功执行方法
        });
        require.config({
            paths: {
                echarts: 'http://echarts.baidu.com/build/dist'
            }
        });

        require(
                [
                    'echarts',
                    'echarts/chart/line',
                    'echarts/chart/k'
                ],
                function(ec) {

                    var myChart = ec.init(document.getElementById('main'));
                    var days = new Array();
                    days.push('06-21')

                    days.push('06-22')

                    days.push('06-23')

                    days.push('06-24')

                    days.push('06-25')

                    days.push('06-26')

                    days.push('06-27')

                    days.push('06-28')

                    days.push('06-29')

                    days.push('06-30')

                    days.push('07-01')

                    days.push('07-02')

                    days.push('07-03')

                    days.push('07-04')

                    var pvs = [5040, 5824, 7002, 6491, 6251, 6880, 6025, 5414, 5210, 5116, 6431, 6866, 6895, 2853];
                    var dls = [409, 496, 683, 597, 510, 538, 475, 438, 429, 443, 519, 575, 530, 211];
                    var ats = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

                    option = {
                        tooltip: {
                            trigger: 'axis'
                        },
                        title: {
                            left: 'center',
                            text: '喵播 近期总数据'
                        },
                        legend: {
                            data: ['总点击', '总下载', '总激活']
                        },
                        toolbox: {
                            show: false,
                            feature: {
                                mark: {show: true},
                                dataView: {show: true, readOnly: false},
                                magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                                restore: {show: true},
                                saveAsImage: {show: true}
                            }
                        },
                        calculable: true,
                        xAxis: [
                            {
                                type: 'category',
                                boundaryGap: false,
                                data: days
                            }
                        ],
                        yAxis: [
                            {
                                type: 'value'
                            }
                        ],
                        series: [
                            {
                                name: '总点击',
                                type: 'line',
                                line: '总量',
                                data: pvs
                            },
                            {
                                name: '总下载',
                                type: 'line',
                                line: '总量',
                                data: dls
                            },
                            {
                                name: '总激活',
                                type: 'line',
                                line: '总量',
                                data: ats
                            }
                        ]
                    };
                    myChart.setOption(option);
                }
        );
    });
</script>
</html>